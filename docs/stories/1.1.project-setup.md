# Story 1.1: Project Setup and Development Environment

## Status
Draft

## Story
**As a** developer,
**I want** a fully configured Node.js/TypeScript project with React frontend and Express backend,
**so that** I have a solid foundation to build features efficiently with type safety and modern tooling.

## Acceptance Criteria
1. Node.js 18+ project initialized with package.json and TypeScript 5+ configuration
2. Project structure follows the monorepo pattern with organized directories: `/src/client` (React), `/src/server` (Express), `/src/shared` (shared types), `/tests`
3. Vite configured for React frontend with hot reload and TypeScript support
4. Express.js server configured with TypeScript and basic middleware (CORS, JSON body parser)
5. ESLint and Prettier configured for code quality and consistent formatting
6. Git repository initialized with .gitignore (excluding node_modules, build artifacts, data files)
7. README.md created with setup instructions for running `npm install`, `npm run dev`, and `npm run build`
8. npm scripts configured: `dev` (runs both frontend and backend concurrently), `build`, `test`
9. Basic health-check endpoint (`GET /api/health`) returns 200 OK when server is running
10. React app renders a "Hello World" placeholder page when accessing localhost:3000

## Tasks / Subtasks

- [ ] **Task 1: Initialize Node.js project with TypeScript configuration** (AC: 1)
  - [ ] Run `npm init` to create package.json
  - [ ] Install TypeScript 5.3+ as dev dependency
  - [ ] Create base tsconfig.json with strict mode enabled [Source: architecture/13-coding-standards-conventions.md#typescript-standards]
  - [ ] Configure Node.js version to 18+ in package.json engines field

- [ ] **Task 2: Set up monorepo structure with npm workspaces** (AC: 2)
  - [ ] Create workspace directories: `/apps/web`, `/apps/server`, `/packages/shared`, `/packages/config` [Source: architecture/2-high-level-architecture.md#repository-structure]
  - [ ] Configure npm workspaces in root package.json
  - [ ] Create package.json files for each workspace
  - [ ] Set up TypeScript project references between workspaces

- [ ] **Task 3: Configure Vite for React frontend** (AC: 3)
  - [ ] Install Vite 5.0+ and React 18.2+ dependencies in apps/web [Source: architecture/3-tech-stack.md]
  - [ ] Create vite.config.ts with dev server on port 3000, HMR enabled
  - [ ] Create apps/web/src structure: components/, views/, hooks/, services/, context/, utils/, styles/, types/
  - [ ] Set up index.html and main.tsx entry point
  - [ ] Configure TypeScript for React (tsconfig.json with jsx: 'react-jsx')

- [ ] **Task 4: Configure Express backend with TypeScript** (AC: 4)
  - [ ] Install Express 4.18+ and TypeScript types in apps/server [Source: architecture/3-tech-stack.md]
  - [ ] Create apps/server/src structure: routes/, services/, middleware/, utils/, types/
  - [ ] Create app.ts with Express app initialization
  - [ ] Configure CORS middleware to allow frontend origin (localhost:3000)
  - [ ] Configure express.json() middleware for JSON body parsing
  - [ ] Create index.ts server entry point listening on port 3001

- [ ] **Task 5: Configure ESLint and Prettier** (AC: 5)
  - [ ] Install ESLint, Prettier, and required plugins [Source: architecture/13-coding-standards-conventions.md#eslint-configuration-details]
  - [ ] Create .eslintrc.json with TypeScript, React, a11y, security, import plugins
  - [ ] Create .prettierrc.json with formatting rules (semi, singleQuote, printWidth 100, tabWidth 2) [Source: architecture/13-coding-standards-conventions.md#code-formatting-prettier]
  - [ ] Create .prettierignore and .eslintignore files
  - [ ] Add lint and format npm scripts to package.json

- [ ] **Task 6: Initialize Git repository with .gitignore** (AC: 6)
  - [ ] Run `git init` if not already initialized
  - [ ] Create .gitignore with entries: node_modules/, dist/, build/, .env, data/, coverage/, *.log
  - [ ] Create initial commit with project structure

- [ ] **Task 7: Create comprehensive README.md** (AC: 7)
  - [ ] Document project overview and features
  - [ ] Add prerequisites section (Node.js 18+, npm)
  - [ ] Write installation instructions (`npm install`)
  - [ ] Document development commands (`npm run dev`)
  - [ ] Document build commands (`npm run build`)
  - [ ] Add troubleshooting section

- [ ] **Task 8: Configure npm scripts for concurrent execution** (AC: 8)
  - [ ] Install concurrently package for running multiple processes
  - [ ] Add `dev` script that runs both frontend (Vite) and backend (Express) concurrently
  - [ ] Add `build` script for production builds of both apps
  - [ ] Add `test` script placeholder (will be configured in Story 1.9)
  - [ ] Add `lint` and `format` scripts for code quality

- [ ] **Task 9: Implement health check endpoint** (AC: 9)
  - [ ] Create apps/server/src/routes/health.ts with GET /api/health endpoint
  - [ ] Return JSON response: `{ status: 'ok', timestamp: ISO8601 }` with 200 status
  - [ ] Register health route in app.ts
  - [ ] Test endpoint returns 200 OK when server is running

- [ ] **Task 10: Create React "Hello World" placeholder** (AC: 10)
  - [ ] Create basic App.tsx component with "Hello World" text
  - [ ] Add minimal global styles in apps/web/src/styles/global.css
  - [ ] Verify app renders at http://localhost:3000
  - [ ] Ensure hot module replacement works (changes reflect without full reload)

## Dev Notes

### Previous Story Insights
No previous story exists - this is the first story of the project.

### Tech Stack & Versions
[Source: architecture/3-tech-stack.md#technology-stack-table]

**Frontend:**
- TypeScript 5.3+
- React 18.2+
- Vite 5.0+ (build tool with HMR)
- Tailwind CSS 3.4+ (defer to later story, just install)

**Backend:**
- TypeScript 5.3+
- Express.js 4.18+
- Node.js 18+ LTS

**Development Tools:**
- ESLint (with plugins: @typescript-eslint, react, react-hooks, jsx-a11y, security, import)
- Prettier
- Jest 29.7+ (backend testing)
- Vitest 1.0+ (frontend testing)

**Process Management:**
- npm scripts with concurrently for dev mode

### Monorepo Structure
[Source: architecture/2-high-level-architecture.md#repository-structure]

**Required directory structure:**
```
/
├── apps/
│   ├── web/              # React frontend
│   │   ├── src/
│   │   │   ├── components/
│   │   │   ├── views/
│   │   │   ├── hooks/
│   │   │   ├── services/
│   │   │   ├── context/
│   │   │   ├── utils/
│   │   │   ├── styles/
│   │   │   ├── types/
│   │   │   ├── App.tsx
│   │   │   └── main.tsx
│   │   ├── public/
│   │   ├── tests/
│   │   ├── index.html
│   │   ├── vite.config.ts
│   │   ├── tsconfig.json
│   │   └── package.json
│   └── server/           # Express backend
│       ├── src/
│       │   ├── routes/
│       │   ├── services/
│       │   ├── middleware/
│       │   ├── utils/
│       │   ├── types/
│       │   ├── app.ts
│       │   └── index.ts
│       ├── tests/
│       ├── tsconfig.json
│       ├── jest.config.js
│       └── package.json
├── packages/
│   ├── shared/           # Shared types and utils
│   │   ├── src/
│   │   │   ├── types/
│   │   │   ├── utils/
│   │   │   └── index.ts
│   │   ├── tsconfig.json
│   │   └── package.json
│   └── config/           # Shared configs
│       ├── eslint/
│       ├── typescript/
│       └── package.json
├── data/                 # JSON storage (created at runtime)
├── docs/                 # Documentation
├── .gitignore
├── .eslintrc.json
├── .prettierrc.json
├── package.json          # Root workspace config
├── tsconfig.json         # Root TS config
└── README.md
```

**Rationale:** npm workspaces provide monorepo support without additional tooling. This structure enables shared TypeScript types between frontend and backend, maintains clear separation of concerns, and supports future extraction of services if needed.

### TypeScript Configuration Standards
[Source: architecture/13-coding-standards-conventions.md#typescript-standards]

**Required tsconfig.json settings:**
- `strict: true` (enables all strict type-checking)
- `noImplicitAny: true`
- `strictNullChecks: true`
- `noUnusedLocals: true`
- `noUnusedParameters: true`
- `noImplicitReturns: true`
- `noFallthroughCasesInSwitch: true`

**Type import convention:**
```typescript
// Use type imports for type-only imports
import type { Task, Config } from '@simple-todo/shared/types';
```

### File Naming Conventions
[Source: architecture/13-coding-standards-conventions.md#file-naming-conventions]

| File Type | Convention | Example |
|-----------|------------|---------|
| React Components | PascalCase | `TaskCard.tsx`, `AddTaskInput.tsx` |
| Services/Classes | PascalCase | `TaskService.ts`, `DataService.ts` |
| Utilities/Helpers | camelCase | `formatDuration.ts` |
| Hooks | camelCase with `use` prefix | `useTasks.ts` |
| Types/Interfaces | PascalCase | `Task.ts`, `Config.ts` |
| Tests | Match source + `.test` | `TaskService.test.ts` |
| Configuration | kebab-case | `vite.config.ts`, `jest.config.js` |

### Import Path Conventions
[Source: architecture/13-coding-standards-conventions.md#import-path-conventions]

**Absolute imports from shared packages:**
```typescript
import type { Task } from '@simple-todo/shared/types';
import { TaskHelpers } from '@simple-todo/shared/utils';
```

**Relative imports within same app:**
```typescript
import { TaskCard } from '../components/TaskCard';
import { useTasks } from '../hooks/useTasks';
```

**Import order (enforced by ESLint):**
1. React (always first)
2. External dependencies (alphabetical)
3. Internal shared packages (alphabetical)
4. Parent directories
5. Sibling files

### Code Formatting Rules (Prettier)
[Source: architecture/13-coding-standards-conventions.md#code-formatting-prettier]

- **Semi-colons:** Required
- **Quotes:** Single quotes (strings), double quotes (JSX)
- **Print Width:** 100 characters
- **Tab Width:** 2 spaces
- **Trailing Commas:** ES5 style
- **Arrow Parens:** Always
- **End of Line:** LF (Unix-style)

### ESLint Configuration
[Source: architecture/13-coding-standards-conventions.md#eslint-configuration-details]

**Required plugins:**
- `@typescript-eslint/eslint-plugin` - TypeScript rules
- `eslint-plugin-react` - React best practices
- `eslint-plugin-react-hooks` - React Hooks rules
- `eslint-plugin-jsx-a11y` - Accessibility rules
- `eslint-plugin-security` - Security vulnerability detection
- `eslint-plugin-import` - Import/export organization

### Git Commit Conventions
[Source: architecture/13-coding-standards-conventions.md#git-commit-conventions]

Use Conventional Commits format:
```
<type>(<scope>): <subject>

<body>

Co-Authored-By: Claude <noreply@anthropic.com>
```

**Types:** feat, fix, docs, style, refactor, perf, test, chore

### Express Server Configuration
[Source: architecture/2-high-level-architecture.md#platform-and-infrastructure-choice]

- **Port:** 3001 (backend API)
- **CORS:** Enabled for localhost:3000 (frontend)
- **Middleware:** JSON body parser, error handler
- **API prefix:** `/api` for all endpoints

### Vite Development Server
[Source: architecture/3-tech-stack.md]

- **Port:** 3000 (frontend)
- **Features:** Hot Module Replacement (HMR), instant server start
- **Proxy:** Not needed for MVP (frontend calls backend at :3001)

### Platform Requirements
[Source: architecture/2-high-level-architecture.md#platform-and-infrastructure-choice]

**Supported Operating Systems:**
- Windows 10+
- macOS 12+
- Linux Ubuntu 20.04+

**Runtime:** Node.js 18+ LTS (local process, no cloud hosting)

### Data Directory (Future Stories)
[Source: architecture/2-high-level-architecture.md#repository-structure]

The `./data/` directory will be created at runtime by future stories. Add to .gitignore but do not create in this story.

**Contents (future):**
- `tasks.json` - Task data storage
- `config.json` - Configuration data
- `prompts.json` - Prompt event tracking

### Project Structure Notes
The architecture specifies a slightly different directory structure than the AC mentions:
- **AC says:** `/src/client`, `/src/server`, `/src/shared`, `/tests`
- **Architecture says:** `/apps/web`, `/apps/server`, `/packages/shared`, `/packages/config`

**Resolution:** Follow the architecture structure (`/apps/` and `/packages/`) as it's more detailed and supports npm workspaces properly. The tests will be colocated with each workspace.

### Security Considerations
[Source: architecture/13-coding-standards-conventions.md#eslint-configuration-details]

ESLint security plugin must be configured to detect:
- Unsafe regex patterns
- Object injection vulnerabilities
- Non-literal require statements

### Performance Considerations
[Source: architecture/3-tech-stack.md]

- Vite provides instant HMR for development
- Production builds use Rollup for tree-shaking and code splitting
- TypeScript compilation for type checking (tsc --noEmit for validation)

## Dev Notes - Testing

### Testing Frameworks
[Source: architecture/10-testing-strategy.md#rationale-and-key-decisions]

**Backend Testing:**
- **Framework:** Jest 29.7+
- **Purpose:** Unit and integration tests for Node.js/TypeScript services
- **Location:** `apps/server/tests/`

**Frontend Testing:**
- **Framework:** Vitest 1.0+ with React Testing Library 14.0+
- **Purpose:** Component and integration tests
- **Location:** `apps/web/tests/`

### Test Organization Structure
[Source: architecture/10-testing-strategy.md#test-organization-structure]

**Backend tests structure:**
```
apps/server/tests/
├── unit/
│   ├── services/
│   └── utils/
├── integration/
│   ├── api/
│   └── data/
├── fixtures/
└── helpers/
    ├── testSetup.ts
    └── factories.ts
```

**Frontend tests structure:**
```
apps/web/tests/
├── unit/
│   ├── components/
│   └── hooks/
├── integration/
├── mocks/
└── helpers/
    ├── testSetup.ts
    └── renderWithProviders.tsx
```

### Testing Commands
[Source: architecture/10-testing-strategy.md#testing-commands]

Configure these npm scripts:
- `test` - Run all tests
- `test:server` - Run backend tests only
- `test:client` - Run frontend tests only
- `test:watch` - Watch mode for development
- `test:coverage` - Generate coverage report
- `type-check` - TypeScript type checking (tsc --noEmit)

### Coverage Requirements
[Source: architecture/10-testing-strategy.md#coverage-requirements]

**For this story:** No coverage requirements yet. Testing infrastructure setup only.

**Future stories:** 70%+ coverage threshold for business logic (TaskService, DataService, etc.)

### Testing Configuration Files Needed
- `apps/server/jest.config.js` - Jest configuration for backend
- `apps/web/vitest.config.ts` - Vitest configuration for frontend (can extend vite.config.ts)

### Pre-Commit Hooks (Optional for MVP)
[Source: architecture/13-coding-standards-conventions.md#linting-and-formatting-commands]

Consider adding Husky + lint-staged for automatic linting/formatting on commit. Can be deferred to a later story if time is limited.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-20 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent_

### Debug Log References
_To be filled by Dev Agent_

### Completion Notes List
_To be filled by Dev Agent_

### File List
_To be filled by Dev Agent_

## QA Results
_To be filled by QA Agent_
